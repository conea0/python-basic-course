# 特殊メソッド

## 特殊メソッドとは
Pythonのクラスでは、**特殊メソッド**という**呼び出されるタイミングが決まっている**2つのアンダーバーで囲まれた特定な名前のメソッドがあります。

オブジェクトの振るまいを変えたり、クラスの性質にあった動きをさせたいときに特殊メソッドを使います。

全部の特殊メソッドを紹介するのはちょっと大変なので、基本的なものを学習していきましょう！

## __init__
この特殊メソッドは、Pythonでクラスを使うときに、ほぼ必ず使われるものです。

役割として**インスタンスの初期化**を行ってくれます。

インスタンスを複数生成した場合に、前の値が残っていたら使いづらいですよね。

それを防ぐために初期化を行ってくれます。

では実際に__init__を使ってインスタンス化してみよう！

```python
class Book:
    def __init__(self,name,price):
        self.name = name
        self.price = price

book_1 = Book('3匹の子ぶた',1200)
print(book_1.name,book_1.price)

book_2 = Book('はらぺこあおむし',1300)
print(book_2.name,book_2.price)
```
2行目で`__init__`を定義して、引数として受け取っている`name`と`price`を`self.name`と`self.price`に入れています。

**self**とはインスタンス自身のことで、今回の場合は**self=book_1**と思ってもらって構いません。

6,7行目の実行結果は「3匹の子ぶた 1200」、8,9行目は「はらぺこあおむし 1300」となり、インスタンス化されるたびにちゃんと値が変わっていることが確認できます！

## __iter__と__next__
Pythonの特殊メソッド __iter__ と __next__ は、**イテレータオブジェクトを作成**し、そのオブジェクトを**順番に要素を返すための方法を定義する**のに使用されます。

**イテレータオブジェクト**とは、順番に並んだデータ（例: リストや文字列）から、一つずつ要素を取り出すための便利なツールです。

iter()でイテレータを作り、next()で次の要素を取得できます。

これらのメソッドを使った例を紹介しましょう。

### イテレータクラスを作成
まず、イテレータオブジェクトを作成するクラスを定義します。

このクラスは __iter__ メソッドを持ち、その中で「self」を返します。

```python
class MyIterator:
    def __iter__(self):
        return self
```

### __next__ メソッドを実装
次に、__next__ メソッドを実装します。

このメソッドは、イテレータが順番に要素を返すために使用されます。ここでは、1から5までの数値を順に返す例を示します。

```python
def __next__(self):
        if hasattr(self, 'current'):
            self.current += 1
        else:
            self.current = 1

        if self.current <= 5:
            return self.current
        else:
            raise StopIteration
```

### イテレータオブジェクトの使用
これで、イテレータオブジェクトを使う準備が整いました。

以下のようにイテレータオブジェクトを作成し、 for ループを使って要素を順に取得できます。

```python
my_iterator = MyIterator()

for item in my_iterator:
    print(item)
```

このコードは1から5までの数値を順に出力します。

この例では、__iter__ メソッドで自分自身を返し、__next__ メソッドで要素を順に返す方法を示しています。

イテレータとは順番にアイテムを提供する道具のようなものだと考えるとわかりやすいかもしれません!

## __str__

このメソッドは、オブジェクトを**文字列に変換する**際に使用されます。

例として、「動物」を表すクラスを考えてみましょう。

```python
class Animal:
    def __init__(self, name, species):
        self.name = name
        self.species = species

    def __str__(self):
        return f"{self.name}は{self.species}です"
```
このクラスには__str__メソッドが実装されており、オブジェクトを文字列に変換すると、「{self.name}は{self.species}です」のような文言が返されます。

今回の場合の__str__ メソッドは、この動物オブジェクトを文字列に変換するときに使われます。

たとえば、もし私たちが "ネコ" という名前の猫のオブジェクトを作成した場合、print(cat) とすると、ネコは猫ですと表示されます。

## __len__
__len__メソッドは、**オブジェクトが持つ要素（たとえば、リストや文字列の文字数）の長さを返す**のに使われます。

例として、果物バスケットを表現するクラスを考えてみましょう。

```python
class FruitBasket:
    def __init__(self):
        self.contents = []

    def add_fruit(self, fruit):
        self.contents.append(fruit)
```

このクラスには__len__メソッドが実装されており、バスケット内の果物の数を返します。

バスケット内にいくつの果物があるか知るために使えます。

たとえば、len(basket) とすると、バスケット内の果物の数が分かります。
