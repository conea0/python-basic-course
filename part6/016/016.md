# データの抽出

## 行の取得

pandasでは、行の位置をリストと同様にして**スライス**として指定することで任意の行を抽出することができます。

今回仕様するDataFrameはcsvファイルのIrisDataSetをDataFrameに変換したものを用います。

```python
import pandas as pd
iris = pd.read_csv('iris.csv')
print(iris[:3])
```

出力
```
   sepal length (cm)  sepal width (cm)  petal length (cm)  petal width (cm)  target
0                5.1               3.5                1.4               0.2       0
1                4.9               3.0                1.4               0.2       0
2                4.7               3.2                1.3               0.2       0
```

このコードはDataFrameの先頭から3つの要素を抽出しています。pandasのDataFrameの行番号は**0から始まる**のでindexが0から2までの要素を取得しています。

スライスでデータを取得する場合はリストの時と基本的に同じように指定することができます。

次にDataFrameの後ろから3つの要素を抽出してみましょう。

```python
iris = pd.read_csv('iris.csv')

print(iris[-3:])
```

出力
```
     sepal length (cm)  sepal width (cm)  petal length (cm)  petal width (cm)  target
147                6.5               3.0                5.2               2.0       2
148                6.2               3.4                5.4               2.3       2
149                5.9               3.0                5.1               1.8       2
```

このデータは149行からなるデータです。したがって、一番後ろのデータから3つ取得できていることが分かります。


## 列の取得

DataFrameから任意の列を抽出するには上のコードを例にすると**iris.target**のように指定して取得することができます。

これを用いて、target列の先頭5つを取得してみます。

```python
iris = pd.read_csv('iris.csv')

print(iris.target.head())
```

出力
```
0    0
1    0
2    0
3    0
4    0
Name: target, dtype: int64
```

これとは別の方法で**iris['target']**のように指定して取得することができます。

```python
iris = pd.read_csv('iris.csv')

print(iris['target'].head())
```

```
0    0
1    0
2    0
3    0
4    0
Name: target, dtype: int64
```

また、複数列を取得することもできます。複数列を取得するときは列名のリストを指定することで取得できます。

```python
iris = pd.read_csv('iris.csv')

print(iris[['sepal length (cm)','sepal width (cm)','petal length (cm)']].head())
```

```
   sepal length (cm)  sepal width (cm)  petal length (cm)
0                5.1               3.5                1.4
1                4.9               3.0                1.4
2                4.7               3.2                1.3
3                4.6               3.1                1.5
4                5.0               3.6                1.4
```


## ilocについて

DataFrameに対して、**iloc**を使うと、NumPyの配列と同様に、**行と列の位置を指定して**データを抽出することができます。

以下のコードで0行目のデータを取得してみます。

```python
iris = pd.read_csv('iris.csv')

print(iris.iloc[0])
```

出力
```
sepal length (cm)    5.1
sepal width (cm)     3.5
petal length (cm)    1.4
petal width (cm)     0.2
target               0.0
Name: 0, dtype: float64
```

次に0行目の3列目のデータを取得してみます。

```python
iris = pd.read_csv('iris.csv')

print(iris.iloc[0,3])
```

出力
```
0.2
```

次にスライスを用いてデータを取得してみます。

0行目から2行目の前の行の中の0列目から2列目の前の列までを取得する。

```python
iris = pd.read_csv('iris.csv')

print(iris.iloc[0:5,0:2])
```

出力
```
   sepal length (cm)  sepal width (cm)
0                5.1               3.5
1                4.9               3.0
2                4.7               3.2
3                4.6               3.1
4                5.0               3.6
```

## locについて

DataFrameの**loc**を使うと、抽出したい行のインデックスラベルや列のラベルを指定して取り出すことができます。ilocとの違いとしてはインデックスの指定が方法違います。

ilocでは整数位置を使用して行や列にアクセスします。行と列はDataFrameの 0 から始まる整数の位置で指定されます。

locではラベルを使用して行や列にアクセスします。行と列のラベルは、DataFrameのインデックスやカラムの名前です。

入力する値に違いはあるもののデータの指定方法はilocの場合と変わりません。以下のコードではlocにスライスを用いてデータを取り出しています。

```python
iris = pd.read_csv('iris.csv')

print(iris.loc[0:5,['sepal length (cm)','sepal width (cm)']])
```

出力
```
   sepal length (cm)  sepal width (cm)
0                5.1               3.5
1                4.9               3.0
2                4.7               3.2
3                4.6               3.1
4                5.0               3.6
5                5.4               3.9
```

ここで注目してほしいのは取得してきた行の個数です。**0:5**のスライス部分と出力の行数です。locを用いるとスライスで取得する範囲を指定すると指定した範囲分すべて取得することができます。
